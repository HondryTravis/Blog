---
title: CDN
---

![cdn](/images/http/cdn.png)

左侧为非 CDN, 右侧为 CDN 状态

## 概述

cdn 是数据分发网络，对网络优化的一种。非 CDN 是不管客户端在地球 🌍 的任何一个角落，都要到同一台服务器去取东西。这种情况有些问题，首先服务器就一个，访问量大会造成服务器压力大。第二个问题是客户端到服务器的网络状态不好控制，比如从北京去访问美国的服务器，那中间要经过很多传输设备和很多海底电缆光缆，这个速度肯定是要慢。

所以这个时候需要给服务器建立镜像，建立若干个镜像，根据客户端的地理位置，网络结构分别放在不同的位置。一般越近越好，中间跨越的路由设备和交换设备越少越好。这就是布置镜像服务器的原则，而这些镜像服务器里边的数据都是一样的。访问的时候就会就近访问，这样以来访问速度就快，压力就小。这些服务器的 IP 是不一样的，但是要访问的时候就产生了 IP 和域名解析的问题。这个时候就需要配合cdn，在一个区域内，cdn 分级去管理。这个区域内有内部服务器，就是名称服务器（ DNS 的名称服务器），这个时候访问的时候给返回的IP就是当前镜像服务器的IP。所以在不同的区域，DNS 返回的就是自己区域内的镜像服务器的 IP。根据IP网段，地理位置等去返回离的最近的镜像服务器地址。这样就解决了域名的问题。镜像加上DNS域名解析，就构成了 DNS 的主要机制。
